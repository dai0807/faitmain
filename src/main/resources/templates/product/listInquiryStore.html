<!DOCTYPE html>
<html lang="ko" layout:decorate="~{layout/myPage_layout}" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset = "UTF-8">
    <title>문의 목록</title>
    
    <link rel="stylesheet" type="text/css" href="/productDesign/vendor/bootstrap/css/bootstrap.min.css">
	
	<link rel="stylesheet" type="text/css" href="/productDesign/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="/productDesign/fonts/iconic/css/material-design-iconic-font.min.css">
	<link rel="stylesheet" type="text/css" href="/productDesign/fonts/linearicons-v1.0.0/icon-font.min.css">
		
	<link rel="stylesheet" type="text/css" href="/productDesign/css/util.css">
	<link rel="stylesheet" type="text/css" href="/productDesign/css/main.css">
	
	<style>
	
 		.form-group{ 
			margin-top:10px ; 	 
		}
		
		h5,span{font-family: 'Nanum Gothic Coding', monospace;}
		
    </style>
    
    <script type="text/javascript">
    	
    	//let searchCondition = '[[${ search.searchCondition }]]';
    	
    	function fncGetList(currentPage) {
			$("#currentPage").val(currentPage);	
			$("form").submit();		
		}	
    	
    	$(function(){
						
			$("#replyYes").on("click", function () {
				$("#searchKeyword").val("true");
				console.log($("#searchKeyword").val());
				fncGetList(1);
			});
			
			$("#replyNo").on("click", function () {
				$("#searchKeyword").val("false");
				fncGetList(1);
			});
			
		});
		
    </script>
</head>
<body>
	<article  class="py-5" layout:fragment="content">
		<div class="container">		
						
			<div class="row">
				<form th:action="@{/inquiry/getInquiryList?resultJsp=listInquiryStore}" method="post">
					<input type="hidden" name="searchCondition" value="replyStatus" />
					<input type="hidden" id="searchKeyword" name="searchKeyword" value=""/>
				</form>
				<span class="flex-w flex-m stext-111 cl2 p-b-19">
					<span>
						<button type="button" class="cl4" id="replyYes">답변완료</button>
						<span class="cl12 m-l-4 m-r-6">|</span>
					</span>
				
					<span>
						<button type="button" class="cl4" id="replyNo">미답변</button>
					</span>
				</span>
			
				<div class="col-lg-10 col-xl-7 m-lr-auto m-b-50">
					<div class="m-l-25 m-r--38 m-lr-0-xl">
						<div class="wrap-table-shopping-cart">
							<table class="table-shopping-cart" id="inquiryTable">
								<tr class="table_head">
									<th class="column-1">상품번호</th>
									<th class="column-2">문의제목</th>
									<th class="column-3">문의자</th>
									<th class="column-4">답변상태</th>
									<th class="column-5"></th>
								</tr>
								
								<th:block th:each="inquiry : ${list}">
									<tr class="table_row">
										<td class="column-1">
											<a class="stext-115 cl7 hov-cl1 size-213 p-t-18" 
											   th:href="@{/product/getProduct(productNumber=${inquiry.inquiryProduct.productNumber})}" 
											   th:text="${inquiry.inquiryProduct.productNumber}">
											</a>
										</td>
										<td class="column-2" >
										
											<th:block th:if="${inquiry.inquiryReplyStatus == true}">
												<a class="stext-115 cl7 hov-cl1 size-213 p-t-18" 
												   th:href="@{/inquiry/updateInquiry?resultJsp=updateInquiryStore&inquiryNumber=} + ${inquiry.inquiryNumber}" 
												   th:text="${inquiry.inquiryTitle}">
												</a>
											</th:block>
											
											<th:block th:if="${inquiry.inquiryReplyStatus == false}">
												<a class="stext-115 cl7 hov-cl1 size-213 p-t-18" 
												   th:href="@{/inquiry/updateInquiry?resultJsp=addInquiryReply&inquiryNumber=} + ${inquiry.inquiryNumber}" 
												   th:text="${inquiry.inquiryTitle}">
												</a>
											</th:block>			
																			
										</td>
										<td class="column-3" th:text="|${#strings.substring(inquiry.userId, 0, 3)}****|"></td>
										<td class="column-4">
											<th:block th:if="${inquiry.inquiryReplyStatus == true}">답변완료</th:block>
											<th:block th:if="${inquiry.inquiryReplyStatus == false}">미답변</th:block>
										</td>
										<td class="column-5">																					
										</td>
									</tr>
								</th:block>	
								
							</table>	

						</div>
					</div>
				</div>
			</div>
			
			<!-- 페이지(어떻게 할지 모르겠다) -->
			<ul class="pagination">
			
				<!--  <<== 좌측 nav -->
				<th:block th:if="${ resultPage.currentPage <= resultPage.pageUnit }">
					<li class="disabled">
				</th:block>
				<th:block th:if="${ resultPage.currentPage > resultPage.pageUnit }">
					<li>
				</th:block>
				<a th:href="|javascript:fncGetList('${ resultPage.currentPage-1}')|" aria-label="Previous">
					<span aria-hidden="true">&laquo;</span>
				</a>
				</li>
			
				<!--  중앙  -->
				<!--<c:forEach var="i"  begin="${resultPage.beginUnitPage}" end="${resultPage.endUnitPage}" step="1">-->
				<th:block th:each="num : ${#numbers.sequence(resultPage.beginUnitPage,resultPage.endUnitPage)}">
					<!--<th:block th:if test="${ resultPage.currentPage == num }">-->
					<!--  현재 page 가르킬경우 : active -->
					<li class="active" th:if="${ resultPage.currentPage == num }">
						<a th:href="|javascript:fncGetList('${ num }');|" th:text="${num}"><span
								class="sr-only">(current)</span></a>
					</li>
			
					<!--<c:if test="${ resultPage.currentPage != i}">-->
					<li th:if="${ resultPage.currentPage != num }">
						<a th:href="|javascript:fncGetList('${ num }');|" th:text="${num}"></a>
					</li>
					<!--</c:if>-->
				</th:block>
			
				<!--  우측 nav==>> -->
				<th:block th:if="${ resultPage.endUnitPage >= resultPage.maxPage }">
					<li class="disabled">
				</th:block>
				<th:block th:if="${ resultPage.endUnitPage < resultPage.maxPage }">
					<li>
				</th:block>
				<a th:href="|javascript:fncGetList('${resultPage.endUnitPage+1}')|" aria-label="Next">
					<span aria-hidden="true">&raquo;</span>
				</a>
				</li>
			</ul>
			
		</div>		
		  
	</article>
</body>
</html>
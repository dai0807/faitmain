<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
				layout:decorate = "~{layout/customer_default_layout2}"
      			xmlns:layout = "http://www.
traq.net.nz/thymeleaf/layout">

<head>
	
	<link rel="stylesheet"  th:href="@{/customerDesign/faqCss/css/style.css}">
	<title>faitmain</title>
	<script src="https://code.jquery.com/jquer-1.12.4.min.js"></script>
	<script src="https://code.jquery.com/jquer-latest.js"></script>
	
	<script type="text/javascript">
		function update(){
			
			console.log("FAQ 수정")
			var updateval = $("#update").html();
			
			if(updateval == '수정'){
				
				$("#title").attr("readonly", false);
				$("contents").attr("readonly", false);
				$("updateFAQ").html('수정')
			}else{
				
				var formdata = $(".table").serialize();
				formdata = decodeURIComponent(formdata);
				
				$.ajax({
					type:"POST",
					url:"/customer/json/updateCustomerBoard",
					data: formdata,
					
					success: function(result){
						
						if(result == 1){
							alert("수정완료")
						}else{
							alert("수정 실패")
						}
					}
				});
				
				$("#title").attr("readonly", true);
				$("contents").attr("readonly", true);
				$("updateFAQ").html('수정')
			}
		}
		</script>
		<script type="text/javascript">
		function getList(code){
			console.log(code)
			console.log("리스트 가져오기")
			var listvar = $(".table").html();

			
			$.ajax({
				url:"/customer/json/getCustomerBoardList?boardType=F&FAQCategoryCode="+code,
				type:"GET",
				/* data{
					
				} */
				success : function(data){
					
					$('div.faq').children().remove();
					var abc = "";
					
					for(let i = 0 ; i < data.length ; i ++){
						
				     	abc += '<ul class="faq-accordion" th:if="${not #lists.isEmpty(boardList)}" th:each="row : ${boardList}">'	
			                +  '<li>'
			                +  '<a title="Click" class="expanded" id="title" >'+data[i].boardTitle+ '</a>'
			                +  '<ul class="faq-content" style="display: block;">' 
			                +  '<li>'
			                +  '<div id="contents"><p>'+data[i].boardContent+'</p></div>'
			                +  '</li>'
			                +  '</ul>' 
			                +  '</li>'
			                +  '<button type="button" id="updateFAQ" class="btn_updateFAQ" th:onclick="update()" >수정</button>	</ul>';
					}
					
					$('div.faq').append(abc);
					
					
				},
				
				
			});
			
		}

		
	</script>
</head>

<body>



<article class = "fq-1" layout:fragment = "content">
	<div class="container">
	
		<h3 class ="mb-5">자주묻는질문</h3>
		<hr/>
	
		<table class="table">
		<div id="faq-links">
		    <div id="total" class="faq-selected">
		    	<button style= "border:0; outline:0; background-color: white;" onclick="getList('00')">전체</button>
		    </div>
		    <div id="pay" >
		    	<button style= "border:0; outline:0; background-color: white;" onclick="getList('01')">결제</button>
		    </div>
		    <div id="return" >
		    	<button style= "border:0; outline:0; background-color: white;" onclick="getList('02')">교환/반품</button>
		    </div>
		    <div id="order" >
		    	<button style= "border:0; outline:0; background-color: white;" onclick="getList('03')">배송</button>
		    </div>
		    <div id="live" >
		    	<button style= "border:0; outline:0; background-color: white;" onclick="getList('04')">라이브</button>
		    </div>
		    <div id="point">
		    	<button style= "border:0; outline:0; background-color: white;" onclick="getList('05')">포인트</button>
		    </div>
		</div>
	
			<div id="faq-wrapper" class="about-service ">
			
			<div class="faq-group">
			        <div class="slide-left">
			            <!-- <div>service</div> -->
			        </div>
			    <hr>
			</div><!--faq-group-->
			<div class="slide-left">
			              <div  class="faq">
			                 <ul class="faq-accordion" th:if="${not #lists.isEmpty(boardList)}" th:each="row : ${boardList}">
			
			                    <li>
			                        <a title="Click" th:text="${row.boardTitle}"></a>
			                         <ul class="faq-content">
			                            <li>
			                                <div><p th:text="${row.boardContent}"></p></div>
			                            </li>
			                        </ul> 
			                    </li>
			                    <button type="button" id="updateFAQ" class="btn_updateFAQ" th:onclick="update()" >수정</button>
			                    </ul>
			            </div>
			</div>
			</div>
				








 
        </table>
     
     </div><!--container-->
      <script type="text/javascript" th:src="@{/customerDesign/faqCss/js/cFAQ.js}"></script>
    </article>
</body>
</html> 
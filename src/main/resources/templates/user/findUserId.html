<!DOCTYPE html>

<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>


	<meta charset="UTF-8">
	<title>faitmain login</title>

	<!-- 카카오  API -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" />
	<link
		href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Nanum+Gothic+Coding:wght@400;700&display=swap"
		rel="stylesheet">

	<!--   <link href="/css/login.css" rel="stylesheet" /> -->
	<script src="https://kit.fontawesome.com/10b89606ac.js" crossorigin="anonymous"></script>
	<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.js"></script>

	<link rel = "stylesheet" th:href = "@{/css/bootstrap.min.css}"/> 
    
    <link rel="stylesheet"  href="/productDesign/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" 	href="/productDesign/fonts/iconic/css/material-design-iconic-font.min.css">

 	 	 	 	
    <link rel = "stylesheet" th:href = "@{/css/main.css}"/>
    <link rel = "stylesheet" th:href = "@{/css/util.css}"/>
    
    <!--===============================================================================================-->	
	<script th:src="@{/js/jquery-3.2.1.min.js}"></script>
	<!--===============================================================================================-->	
	<script th:src="@{/js/bootstrap.min.js}"></script>


	<script type="text/javascript">
	
		$(function () {
			$("#findId").on("click", function () {



				var formData = $("#form").serialize();
				console.log(formData);
				$.ajax({
					url: "/user/json/findId",
					type: 'POST',
					data: formData,
					dataType: "text",
					success: function (data) { //컨트롤러에서 넘어온 cnt값을 받는다
						if (data == ("입력하신 정보와 유효한 id가 존재하지 않습니다.")) {

							alert("결과 :: " + data);

						} else {
							$(".modal-content p").append("찾으시는 아이디는 " + data + "입니다.");

							openModal(); //ㅡ modal 창 
						}

					} // success 괄호


				}) //ajax 괄호

			});

		});
		$(function () {

			var code2 = "";

			$("#phoneChk").on("click", function () {


				var phone = $("#phone").val();




				$.ajax({
					type: "GET", url: "uphoneCheck?phone=" + phone,
					success: function (data) {
						if (data == "error") {

							alert("휴대폰 번호가 올바르지 않습니다.")
							$(".successPhoneChk").text("유효한 번호를 입력해주세요.");

							$(".successPhoneChk").css("color", "red");

							$("#phone").attr("autofocus", true);


						} else {


							$("#phone2").attr("disabled", false);
							$("#phoneChk2").css("display", "inline-block");
							$(".successPhoneChk").text("인증번호를 입력한 뒤 본인인증을 눌러주십시오.");
							$(".successPhoneChk").css("color", "green");
							$("#phone").attr("readonly", true);
							console.log("이거뭐야 data " + data)
							code2 = data;
						}
					}
				});
				alert("인증번호 발송이 완료되었습니다.\n휴대폰에서 인증번호 확인을 해주십시오.");



				console.log("dd");

			})


		})


		$(function () {


			$("#phoneChk2").on("click", function () {

				var phone = $("#phone").val()
				var phone2 = $("#phone2").val()
				console.log("phone :" + phone)
				console.log("phone2 :" + phone2)
				console.log("체크체크까ㅣㅈ 옴 ")

				$.ajax({
					type: "GET",
					url: "/user/smsCertificationRequest?phone=" + phone + "&phone2=" + phone2,


					success: function (data) {
						if (data == "error") {
							alert("유효하지 않습니다. .")

						} else if (data == "F") {
							console.log("   data " + data)
							$(".successPhoneChk").text("인증번호가 일치하지 않습니다. 확인해주시기 바랍니다.");
							$("#phoneDoubleChk").val("false");
							$(this).attr("autofocus", true);



						} else if (data = "T") {
							console.log("   data " + data)
							$(".successPhoneChk").text("인증번호가 일치합니다.!!1");
							$(".successPhoneChk").css("color", "green");
							$("#phoneDoubleChk").val("true");
							$("#phone2").attr("disabled", true);



						}


					}  // suceess
				});


			});


		})


	</script>


	<style>
		.wrapper {
			display: grid;
			place-items: center;
		}


		#formContent {
			font-family: 'Nanum Gothic Coding', monospace;
		}

		#getUser,
		p,
		input,
		select,
		textarea {
			color: #585858;
			font-family: "Source Sans Pro", Helvetica, sans-serif;
			font-size: 11pt;
			font-weight: 300;
			line-height: 1.75;
		}

		.modal {
			display: none;
			/* Hidden by default */
			position: fixed;
			/* Stay in place */
			z-index: 1;
			/* Sit on top */
			left: 0;
			top: 0;
			width: 100%;
			/* Full width */
			height: 100%;
			/* Full height */
			overflow: auto;
			/* Enable scroll if needed */
			background-color: rgb(0, 0, 0);
			/* Fallback color */
			background-color: rgba(0, 0, 0, 0.4);
			/* Black w/ opacity */
		}

		/*모달 박스 */
		.modal-content {
			background-color: #fefefe;
			margin: 15% auto;
			/* 15% from the top and centered */
			padding: 20px;
			border: 1px solid #888;
			width: 50%;
			/* Could be more or less, depending on screen size */
		}

		/* The Close Button */
		.close {
			color: #aaa;
			float: right;
			font-size: 28px;
			font-weight: bold;
		}

		.close:hover,
		.close:focus {
			color: black;
			text-decoration: none;
			cursor: pointer;
		}
		
		span{
			font-size: 0.9em;
		}
	</style>


	</style>

	<!-- 길이는 스타일 건들이 -->
</head>

<body>

	<section class="sec-product-detail bg0 p-t-25 p-b-60">
		
			<div class="container">
			
				<div class="m-t-50 p-t-43 p-b-40" style="margin: 0 auto; width: 70%;">
				
					<h2 class="mtext-109 cl2 txt-center" style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #333;">아이디 찾기</h2>
					
					<form id="form" onsubmit="return false" style="padding-top: 20px;">
					
						<div class="form-group row p-b-25">
							<!--<label for="name" class="col-md-8 control-label">이름</label>
													<h5 class="fw-bolder">이름</h5>-->
							<div class="col-12 p-b-5">
								<label class="stext-102 cl3" for="name">이름</label>
								<input class="size-111 bor8 stext-102 cl2 p-lr-20" id="name" name="name" placeholder="회원이름">
							</div>
						
						</div>
						
						<div class="form-group row p-b-25">
							<!--<label for="name" class="control-label">휴대폰번호</label> 
													<h5 class="fw-bolder"> 인증번호 </h5>-->
						
							<div class="col-9 p-b-5">
								<label class="stext-102 cl3" for="phone">휴대전화 인증</label>
								<input class="size-111 bor8 stext-102 cl2 p-lr-20" id="phone" name="phoneNumber"
									placeholder="휴대전화번호 입력 01012345678" type="text" />
							</div>
						
							<div class="col-3 p-b-5">
								<label class="stext-102 cl3" for="address">&nbsp;</label>
								<span class="stext-102 size-111 bg8 bor8 hov-btn1 p-lr-20 trans-04 pointer flex-c-m" id="phoneChk">
									인증번호
								</span>
							</div>
						
							<div class="col-9 p-b-5">
								<input class="size-111 bor8 stext-102 cl2 p-lr-20" disabled id="phone2" name="CertificationNumber"
									placeholder="인증번호 입력" required type="text" />
						
								<span class="point successPhoneChk">휴대폰 번호 입력후 인증번호 보내기를 해주십시오.</span>
							</div>
						
							<div class="col-3 p-b-5">
								<span class="size-111 bg8 bor8 hov-btn1 p-lr-20 trans-04 pointer flex-c-m" disabled id="phoneChk2" name="CertificationNumber"
									placeholder="인증번호 입력" required>
									본인인증
								</span>
							</div>
						
							<input id="phoneDoubleChk" type="hidden" /> </p>
						</div>
						
						<div class="flex-c-m flex-w w-full p-t-10">
						
							<span class="flex-c-m stext-101 cl2 size-101 bg0 bor13 hov-btn1 p-lr-15 trans-04 pointer m-tb-10" id="findId">
								아이디 찾기
							</span>
						
						</div>
					
					</form>
					
				</div>
				
				<!-- 모l -->
				<div id="myModal" class="modal">
				
					<!-- Modal content -->
					<div class="modal-content">
						<span id="close" class="close" onclick="clseoModal();">&times;</span>
						<!--모달에 x버튼 클릭시 나가기  -->
						<p> </p>
				
					</div>
				
				</div>
				
				<script>

					function openModal() {
						modal.style.display = "block";
					}
					function clseoModal() {

						console.log("spane");
						modal.style.display = "none";


						window.opener.top.location.href = "/user/login"
						window.close()

						modal.style.display = "block";
					}

					var modal = document.getElementById('myModal');

					// Get the button that opens the modal
					var btn = document.getElementById("myBtn");

					// Get the <span> element that closes the modal
					var span = document.getElementById("close");
					console.log("span" + span);

					// When the user clicks on the button, open the modal 
					btn.onclick = function () {
						modal.style.display = "block";
					}

					// When the user clicks on <span> (x), close the modal
					span.onclick = function () {
						console.log("spane");
						modal.style.display = "none";


						window.opener.top.location.href = "/user/login"
						window.close()

					}

					// When the user clicks anywhere outside of the modal, close it
					window.onclick = function (event) {
						if (event.target == modal) {
							modal.style.display = "none";
						}
					}

				</script>
				
			</div>
			
	</section>		

</body>

</html>